/* eslint-disable no-param-reassign */
const queueReconstructionByHeight = () => {
  const reconstructQueueSlow = (
    people: [number, number][],
  ): [number, number][] => {
    const placedBefore = (x: number): number => {
      let cnt = 0;
      for (let i = 0; i < x; i += 1) {
        if (people[i][0] >= people[x][0]) {
          cnt += 1;
        }
      }
      return cnt;
    };

    let i = 0;
    while (true) {
      const before = placedBefore(i);
      if (before === people[i][1]) {
        if (i === people.length - 1) {
          return people;
        }
        i += 1;
      } else {
        let diff = people[i][1] - before;
        let nextI = i;
        while (diff !== 0) {
          nextI += Math.sign(diff);
          if (people[nextI][0] >= people[i][0]) {
            diff -= Math.sign(diff);
          }
        }
        const temp = people[i];
        people[i] = people[nextI];
        people[nextI] = temp;
        i = nextI <= i ? nextI + 1 : i;
      }
    }
  };

  const reconstructQueue = (people: [number, number][]): [number, number][] => {
    people.sort((a, b) => (a[0] === b[0] ? a[1] - b[1] : b[0] - a[0]));
    const queue: [number, number][] = [];
    for (let i = 0; i < people.length; i += 1) {
      queue.splice(people[i][1], 0, people[i]);
    }
    return queue;
  };

  console.log(
    reconstructQueue([
      [7, 0],
      [4, 4],
      [7, 1],
      [5, 0],
      [6, 1],
      [5, 2],
    ]),
    [
      [5, 0],
      [7, 0],
      [5, 2],
      [6, 1],
      [4, 4],
      [7, 1],
    ],
  );

  console.log(
    reconstructQueue([
      [6, 0],
      [5, 0],
      [4, 0],
      [3, 2],
      [2, 2],
      [1, 4],
    ]),
    [
      [4, 0],
      [5, 0],
      [2, 2],
      [3, 2],
      [1, 4],
      [6, 0],
    ],
  );

  console.log(
    reconstructQueue([
      [9, 0],
      [7, 0],
      [1, 9],
      [3, 0],
      [2, 7],
      [5, 3],
      [6, 0],
      [3, 4],
      [6, 2],
      [5, 2],
    ]),
    [
      [3, 0],
      [6, 0],
      [7, 0],
      [5, 2],
      [3, 4],
      [5, 3],
      [6, 2],
      [2, 7],
      [9, 0],
      [1, 9],
    ],
  );

  console.log(
    reconstructQueue([
      [701148, 12],
      [654124, 204],
      [57460, 633],
      [276451, 543],
      [512650, 415],
      [113606, 407],
      [921752, 24],
      [40215, 0],
      [817357, 25],
      [445510, 517],
      [625727, 250],
      [218704, 143],
      [589791, 261],
      [662559, 35],
      [719074, 150],
      [818916, 144],
      [252777, 737],
      [641365, 299],
      [351186, 222],
      [198656, 619],
      [574011, 237],
      [126997, 467],
      [129559, 551],
      [928191, 28],
      [510076, 29],
      [905917, 81],
      [770330, 21],
      [996683, 0],
      [630775, 174],
      [256391, 457],
      [739003, 32],
      [783631, 122],
      [707300, 29],
      [609339, 217],
      [440610, 464],
      [878673, 71],
      [122590, 472],
      [669937, 194],
      [587660, 320],
      [171884, 126],
      [523541, 215],
      [548121, 78],
      [523763, 377],
      [486034, 207],
      [234646, 596],
      [852888, 13],
      [656624, 155],
      [722958, 216],
      [847845, 38],
      [20567, 444],
      [250886, 446],
      [680168, 272],
      [152978, 555],
      [570878, 388],
      [682414, 93],
      [245482, 21],
      [615166, 141],
      [740800, 35],
      [517723, 263],
      [975978, 5],
      [605987, 277],
      [467455, 30],
      [271361, 92],
      [642157, 1],
      [808010, 165],
      [72486, 749],
      [686896, 211],
      [833428, 91],
      [386300, 125],
      [966149, 3],
      [977467, 13],
      [527885, 439],
      [435518, 283],
      [197734, 307],
      [168837, 629],
      [496585, 11],
      [741933, 132],
      [126381, 545],
      [386450, 152],
      [705979, 16],
      [923556, 6],
      [463645, 494],
      [95042, 491],
      [720613, 107],
      [702941, 247],
      [318908, 30],
      [91749, 322],
      [479279, 208],
      [900994, 74],
      [979245, 2],
      [440074, 466],
      [635872, 270],
      [220734, 437],
      [12585, 53],
      [481700, 290],
      [110799, 364],
      [854062, 109],
      [653156, 203],
      [267672, 87],
      [536258, 54],
      [918245, 24],
      [580957, 131],
      [274956, 277],
      [467276, 371],
      [23856, 809],
      [60707, 859],
      [44365, 315],
      [911548, 80],
      [243281, 752],
      [277486, 47],
      [868717, 113],
      [96382, 389],
      [850063, 149],
      [427397, 49],
      [608414, 276],
      [333506, 581],
      [131385, 839],
      [761153, 121],
      [380270, 73],
      [814111, 102],
      [245409, 357],
      [257991, 295],
      [231996, 333],
      [126447, 442],
      [68689, 887],
      [730118, 172],
      [901094, 47],
      [807394, 104],
      [443280, 435],
      [939884, 56],
      [948480, 6],
      [201132, 581],
      [490959, 476],
      [759325, 150],
      [949153, 0],
      [549730, 320],
      [171275, 803],
      [428585, 67],
      [2427, 708],
      [743872, 130],
      [358698, 164],
      [965557, 5],
      [326456, 308],
      [229153, 334],
      [397243, 468],
      [353644, 458],
      [215215, 597],
      [37200, 860],
      [910959, 21],
      [24145, 370],
      [882475, 0],
      [961878, 22],
      [267402, 506],
      [13669, 652],
      [687307, 53],
      [425786, 544],
      [256958, 334],
      [481940, 366],
      [523315, 429],
      [978009, 10],
      [252101, 718],
      [922951, 46],
      [985700, 4],
      [745227, 209],
      [350768, 508],
      [545533, 178],
      [5510, 822],
      [113190, 291],
      [910258, 37],
      [100255, 638],
      [530123, 348],
      [89358, 461],
      [66317, 59],
      [418235, 106],
      [404949, 392],
      [353426, 648],
      [772212, 15],
      [316586, 375],
      [520168, 59],
      [323, 189],
      [150462, 671],
      [967877, 18],
      [320526, 506],
      [287828, 68],
      [589888, 300],
      [733465, 192],
      [238230, 2],
      [410471, 127],
      [721063, 122],
      [199531, 123],
      [935226, 61],
      [930142, 62],
      [116330, 619],
      [366596, 452],
      [863593, 45],
      [219986, 49],
      [643493, 137],
      [572463, 121],
      [560116, 82],
      [904018, 32],
      [572589, 308],
      [302120, 131],
      [384862, 237],
      [918121, 67],
      [34551, 516],
      [381894, 361],
      [77773, 239],
      [866557, 19],
      [990546, 1],
      [718055, 22],
      [984537, 11],
      [761568, 78],
      [876699, 61],
      [101489, 388],
      [459253, 254],
      [103241, 663],
      [983296, 11],
      [837655, 102],
      [242671, 545],
      [227241, 108],
      [995154, 0],
      [624583, 354],
      [847918, 127],
      [82060, 185],
      [289094, 406],
      [678003, 32],
      [396914, 150],
      [516336, 135],
      [380177, 72],
      [189497, 168],
      [109644, 232],
      [933213, 63],
      [536221, 150],
      [129085, 374],
      [969100, 23],
      [38936, 488],
      [276617, 482],
      [353187, 526],
      [640587, 34],
      [774509, 172],
      [21008, 748],
      [636989, 58],
      [554739, 331],
      [915709, 76],
      [462918, 20],
      [588849, 258],
      [60319, 290],
      [426865, 381],
      [540592, 7],
      [196228, 371],
      [873446, 21],
      [672155, 219],
      [385755, 259],
      [233683, 626],
      [558365, 315],
      [127597, 574],
      [743364, 224],
      [866408, 91],
      [71710, 122],
      [333297, 459],
      [457669, 471],
      [260053, 455],
      [362972, 359],
      [76169, 290],
      [490591, 109],
      [482206, 84],
      [499321, 289],
      [912843, 66],
      [401777, 58],
      [54525, 287],
      [432192, 45],
      [657817, 311],
      [416757, 42],
      [164681, 773],
      [74537, 82],
      [155988, 76],
      [415507, 89],
      [267971, 671],
      [398210, 341],
      [825559, 143],
      [217497, 671],
      [509202, 457],
      [459131, 173],
      [540075, 315],
      [635625, 56],
      [74602, 209],
      [913700, 13],
      [887329, 104],
      [52464, 605],
      [174721, 646],
      [286845, 128],
      [999278, 0],
      [402303, 179],
      [595622, 291],
      [341616, 497],
      [9120, 671],
      [796504, 65],
      [938993, 5],
      [234555, 308],
      [268023, 378],
      [264227, 162],
      [178849, 796],
      [21091, 612],
      [44317, 85],
      [639282, 258],
      [332566, 593],
      [772932, 213],
      [316701, 537],
      [486058, 213],
      [174069, 541],
      [755603, 167],
      [557051, 71],
      [875316, 86],
      [676782, 37],
      [261749, 662],
      [802050, 7],
      [185994, 324],
      [223415, 436],
      [315115, 222],
      [709673, 125],
      [617059, 216],
      [567578, 91],
      [129205, 805],
      [359939, 333],
      [222218, 394],
      [122032, 513],
      [910310, 53],
      [497565, 228],
      [820758, 80],
      [788160, 43],
      [691975, 18],
      [866545, 80],
      [58261, 693],
      [79145, 754],
      [535013, 94],
      [606753, 209],
      [123840, 69],
      [869818, 62],
      [264839, 490],
      [344685, 330],
      [743016, 107],
      [199088, 112],
      [682669, 42],
      [401305, 92],
      [194684, 208],
      [219419, 522],
      [396429, 411],
      [131424, 16],
      [600469, 60],
      [374883, 476],
      [419494, 243],
      [494010, 116],
      [382704, 231],
      [588723, 108],
      [451979, 294],
      [940087, 37],
      [760957, 110],
      [874969, 7],
      [200077, 160],
      [881759, 62],
      [181851, 133],
      [270347, 346],
      [214779, 261],
      [961679, 12],
      [150254, 194],
      [651134, 198],
      [497247, 457],
      [851584, 125],
      [333907, 656],
      [718810, 25],
      [744725, 89],
      [948415, 37],
      [911191, 45],
      [178726, 658],
      [409675, 510],
      [647241, 26],
      [620727, 35],
      [165449, 508],
      [692770, 264],
      [56055, 108],
      [692819, 102],
      [216246, 336],
      [765827, 204],
      [533461, 427],
      [802056, 177],
      [94909, 271],
      [171054, 680],
      [957687, 28],
      [737835, 217],
      [67764, 792],
      [384829, 550],
      [509317, 486],
      [761353, 52],
      [966692, 20],
      [70392, 308],
      [331834, 377],
      [102393, 335],
      [813760, 121],
      [955260, 29],
      [821533, 112],
      [186431, 354],
      [40194, 650],
      [831224, 84],
      [165407, 43],
      [944095, 16],
      [110661, 414],
      [229307, 411],
      [691201, 245],
      [949115, 43],
      [122980, 546],
      [409938, 215],
      [710872, 82],
      [461366, 164],
      [354089, 232],
      [875286, 49],
      [829832, 5],
      [594215, 23],
      [973871, 8],
      [683190, 46],
      [459389, 397],
      [375974, 59],
      [286931, 452],
      [617320, 216],
      [47510, 549],
      [848505, 73],
      [564682, 58],
      [245820, 215],
      [524471, 188],
      [612496, 181],
      [694067, 189],
      [88883, 775],
      [342337, 494],
      [182394, 419],
      [508341, 45],
      [924554, 13],
      [333576, 316],
      [681019, 134],
      [592478, 190],
      [205740, 696],
      [485079, 338],
      [387191, 560],
      [55336, 676],
      [636480, 136],
      [847177, 4],
      [170114, 573],
      [388315, 340],
      [786667, 203],
      [748305, 136],
      [900975, 19],
      [812977, 175],
      [434581, 174],
      [385907, 502],
      [789348, 65],
      [515260, 321],
      [167715, 275],
      [639838, 8],
      [875351, 116],
      [215546, 241],
      [502799, 412],
      [160558, 374],
      [52918, 257],
      [56757, 607],
      [204721, 583],
      [890048, 29],
      [947677, 32],
      [48586, 29],
      [440579, 118],
      [334728, 458],
      [814282, 76],
      [842816, 93],
      [333399, 437],
      [521726, 415],
      [376621, 377],
      [603940, 215],
      [722172, 5],
      [418564, 138],
      [396296, 323],
      [251816, 212],
      [665131, 55],
      [41991, 289],
      [764442, 66],
      [846426, 153],
      [445431, 116],
      [465979, 26],
      [571083, 12],
      [941497, 16],
      [967873, 3],
      [173533, 272],
      [114218, 595],
      [865451, 18],
      [296835, 570],
      [386216, 12],
      [334604, 472],
      [505177, 288],
      [139265, 814],
      [108594, 372],
      [674884, 206],
      [155895, 50],
      [654437, 125],
      [864481, 1],
      [571192, 11],
      [972404, 11],
      [187618, 440],
      [58814, 184],
      [793789, 107],
      [940404, 56],
      [164213, 317],
      [497886, 468],
      [437271, 551],
      [968966, 12],
      [593589, 263],
      [782853, 111],
      [335742, 590],
      [348129, 189],
      [940865, 42],
      [861727, 94],
      [148632, 797],
      [381216, 380],
      [399815, 53],
      [263904, 160],
      [417183, 223],
      [175905, 445],
      [39626, 459],
      [775122, 187],
      [477583, 396],
      [586388, 263],
      [762381, 170],
      [625012, 218],
      [583195, 78],
      [62189, 774],
      [880685, 35],
      [347869, 249],
      [211136, 86],
      [177207, 135],
      [610268, 66],
      [934451, 44],
      [509185, 463],
      [509192, 244],
      [488777, 155],
      [504719, 342],
      [221236, 543],
      [999518, 0],
      [817537, 92],
      [672876, 213],
      [827878, 22],
      [415548, 490],
      [822860, 31],
      [970818, 8],
      [990513, 5],
      [167332, 752],
      [51103, 764],
      [702944, 98],
      [544861, 56],
      [995593, 1],
      [728060, 148],
      [979982, 9],
      [299455, 515],
      [147408, 142],
      [194011, 66],
      [220440, 66],
      [170159, 224],
      [458317, 507],
      [533185, 281],
      [14523, 571],
      [262999, 257],
      [356649, 126],
      [199972, 748],
      [448499, 397],
      [305058, 344],
      [925721, 36],
      [854194, 106],
      [22298, 450],
      [944298, 26],
      [233494, 536],
      [312109, 313],
      [413094, 130],
      [464947, 488],
      [94417, 364],
      [417140, 188],
      [823884, 104],
      [885508, 21],
      [666118, 144],
      [883088, 21],
      [297783, 263],
      [405279, 136],
      [768127, 221],
      [615222, 138],
      [983157, 6],
      [146290, 173],
      [235975, 423],
      [988539, 0],
      [456375, 105],
      [353914, 152],
      [101110, 621],
      [966036, 25],
      [182467, 317],
      [369755, 27],
      [688051, 289],
      [148711, 151],
      [559445, 398],
      [709361, 167],
      [972672, 19],
      [609524, 313],
      [272763, 581],
      [26196, 800],
      [888837, 12],
      [441089, 232],
      [938149, 38],
      [721820, 106],
      [851235, 10],
      [928311, 13],
      [268780, 336],
      [667344, 262],
      [546728, 205],
      [953642, 7],
      [784918, 9],
      [396003, 45],
      [535811, 30],
      [412400, 52],
      [334813, 386],
      [295008, 446],
      [413831, 520],
      [810150, 154],
      [142227, 308],
      [746868, 94],
      [980824, 2],
      [744487, 148],
      [876647, 12],
      [69004, 618],
      [573268, 259],
      [321442, 213],
      [495633, 198],
      [342789, 144],
      [412660, 495],
      [900305, 46],
      [176737, 242],
      [894461, 82],
      [49676, 495],
      [189012, 633],
      [363101, 62],
      [232381, 469],
      [177503, 412],
      [321496, 578],
      [191412, 352],
      [714201, 24],
      [64091, 28],
      [701149, 257],
      [244944, 453],
      [93, 85],
      [830304, 21],
      [120896, 464],
      [73870, 451],
      [403529, 297],
      [376263, 283],
      [472633, 159],
      [117155, 821],
      [534070, 213],
      [98165, 712],
      [616614, 88],
      [548211, 278],
      [485445, 88],
      [438799, 140],
      [769586, 159],
      [572483, 339],
      [853295, 86],
      [588474, 276],
      [549294, 397],
      [816220, 57],
      [601070, 121],
      [406847, 368],
      [234660, 325],
      [50707, 214],
      [909246, 70],
      [500843, 260],
      [750073, 162],
      [470380, 125],
      [554328, 286],
      [492800, 390],
      [721459, 207],
      [193837, 344],
      [845388, 64],
      [367423, 216],
      [222095, 224],
      [236872, 19],
      [72699, 752],
      [169347, 72],
      [511485, 455],
      [807882, 108],
      [870496, 62],
      [216446, 524],
      [846053, 90],
      [346276, 294],
      [758826, 210],
      [40584, 400],
      [483778, 203],
      [122523, 459],
      [740287, 244],
      [265238, 188],
      [706541, 4],
      [949563, 41],
      [44746, 757],
      [469168, 206],
      [519640, 369],
      [147070, 11],
      [260595, 688],
      [444267, 534],
      [694223, 104],
      [443037, 136],
      [559189, 56],
      [655112, 218],
      [534697, 396],
      [866429, 39],
      [336066, 661],
      [961688, 19],
      [557142, 410],
      [227022, 698],
      [777364, 79],
      [532091, 281],
      [200474, 289],
      [591026, 72],
      [173797, 347],
      [107681, 196],
      [919533, 19],
      [199257, 52],
      [518078, 399],
      [493080, 52],
      [73764, 102],
      [495096, 333],
      [869145, 63],
      [673369, 53],
      [753219, 81],
      [81555, 794],
      [988922, 0],
      [331354, 116],
      [209802, 234],
      [824791, 121],
      [549, 532],
      [238319, 312],
      [101665, 144],
      [142902, 839],
      [816134, 69],
      [262331, 638],
      [16204, 300],
      [838179, 27],
      [319291, 289],
      [595508, 264],
      [524657, 69],
      [725394, 241],
      [91583, 85],
      [220510, 379],
      [697603, 219],
      [445143, 375],
      [859226, 133],
      [46380, 922],
      [289812, 409],
      [706138, 228],
      [792856, 137],
      [691647, 15],
      [64662, 171],
      [509589, 327],
      [36189, 41],
      [243700, 499],
      [322269, 106],
      [153538, 585],
      [828487, 54],
      [198673, 532],
      [443745, 277],
      [920964, 11],
      [500202, 175],
      [376242, 19],
      [738724, 33],
      [562649, 155],
      [817857, 105],
      [947051, 39],
      [622560, 141],
      [503812, 316],
      [23078, 162],
      [892983, 35],
      [822806, 6],
      [248540, 140],
      [555382, 334],
      [319332, 202],
      [204680, 784],
      [146546, 563],
      [587760, 68],
      [659789, 112],
      [96169, 441],
      [355903, 338],
      [137166, 622],
      [875017, 109],
      [186872, 2],
      [671752, 120],
      [793946, 158],
      [760182, 133],
      [942916, 33],
      [150799, 273],
      [511058, 136],
      [138863, 623],
      [661806, 215],
      [786664, 192],
      [547287, 279],
      [643385, 40],
      [818509, 53],
      [887989, 26],
      [103978, 360],
      [138954, 220],
      [206371, 318],
      [586766, 286],
      [344774, 452],
      [986667, 5],
      [799634, 160],
      [302073, 325],
      [411204, 52],
      [684294, 152],
      [986264, 11],
      [266066, 100],
      [472612, 165],
      [832056, 70],
      [353127, 318],
      [428484, 26],
      [144830, 748],
      [925786, 67],
      [848145, 128],
      [898061, 80],
      [47329, 222],
      [761745, 2],
      [190800, 349],
      [210619, 555],
      [321813, 203],
      [787891, 88],
      [957677, 31],
      [726645, 158],
      [34190, 93],
      [757022, 170],
      [863907, 85],
      [548444, 192],
      [357509, 89],
      [3637, 960],
      [482438, 161],
      [715638, 49],
      [757354, 115],
      [708675, 212],
      [439379, 69],
      [875909, 88],
      [162945, 376],
      [329519, 92],
      [732620, 153],
      [711381, 185],
      [695631, 245],
      [549109, 221],
      [707630, 268],
      [527092, 147],
      [313225, 356],
      [308630, 661],
      [818446, 23],
      [796467, 156],
      [520737, 219],
      [610639, 139],
      [434455, 199],
      [457666, 319],
      [711981, 210],
      [61991, 919],
      [662720, 313],
      [873515, 100],
      [556829, 329],
      [327046, 298],
      [376426, 115],
      [768735, 181],
      [605356, 86],
      [541468, 366],
      [933022, 9],
      [215004, 576],
      [644146, 93],
      [548850, 174],
      [655458, 5],
      [566590, 260],
      [147732, 169],
      [561763, 96],
      [339609, 349],
      [479703, 114],
      [163038, 22],
      [90717, 350],
      [735046, 98],
      [582799, 111],
      [447450, 45],
      [346896, 381],
      [630773, 49],
      [295153, 581],
      [342428, 501],
      [524081, 424],
      [354279, 148],
      [385387, 157],
      [845746, 93],
      [893403, 38],
      [253124, 356],
      [669532, 83],
      [619041, 188],
      [443731, 263],
      [166829, 668],
      [750128, 87],
      [913295, 13],
      [577822, 1],
      [774222, 72],
      [628762, 62],
      [596803, 109],
      [796072, 15],
      [263301, 41],
      [882328, 101],
      [413022, 565],
      [626064, 254],
      [936868, 40],
      [552473, 131],
      [599722, 273],
      [772582, 71],
      [475154, 505],
      [854353, 113],
      [545146, 442],
      [186358, 668],
      [499433, 231],
      [487236, 353],
      [255018, 58],
      [265405, 522],
      [868399, 91],
      [339349, 412],
      [17315, 348],
      [395389, 402],
      [80262, 183],
      [561927, 125],
      [87183, 260],
      [880533, 34],
      [117184, 77],
      [1914, 568],
      [291216, 34],
      [677538, 88],
      [727459, 34],
      [875978, 29],
      [438469, 467],
      [635591, 92],
      [643316, 245],
      [346768, 601],
      [354718, 417],
      [676149, 80],
      [651378, 16],
      [629701, 225],
      [626409, 15],
      [572965, 335],
      [528627, 322],
      [196827, 233],
      [109849, 439],
      [333205, 634],
      [157106, 159],
      [358825, 95],
      [414865, 518],
      [635244, 226],
      [861792, 136],
      [310085, 118],
      [753683, 206],
      [809889, 175],
      [162286, 587],
      [643566, 3],
      [947041, 27],
      [613465, 183],
      [244623, 647],
      [544207, 188],
      [73828, 244],
      [127303, 98],
      [987193, 9],
      [700272, 88],
      [229189, 646],
      [780300, 41],
      [658435, 186],
      [437215, 442],
      [715005, 197],
      [463558, 132],
      [921995, 60],
      [894828, 13],
      [180921, 593],
      [117792, 612],
      [831590, 136],
      [612604, 159],
      [114641, 801],
      [404619, 270],
      [161534, 705],
      [907526, 54],
      [555366, 61],
      [359574, 560],
      [955771, 19],
      [17223, 454],
      [566101, 308],
      [293255, 567],
      [719330, 105],
      [723111, 181],
      [868837, 33],
      [453810, 38],
      [962564, 3],
      [770387, 189],
      [486128, 126],
      [534604, 318],
      [420696, 55],
      [359264, 571],
    ]),
  );
};

queueReconstructionByHeight();
